

# PDesire & frap129 custom configs
# configure governor settings for little cluster
echo "interactive" > /sys/devices/system/cpu/cpu0/cpufreq/scaling_governor
echo 1 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_sched_load
echo 1 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/use_migration_notif
echo "0  600000:19000 672000:20000 960000:24000 1248000:38000" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/above_hispeed_delay
echo 93 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/go_hispeed_load
echo 50000 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/timer_rate
echo 600000 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/hispeed_freq
echo 1 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/io_is_busy
echo "29 384000:88 600000:90 672000:92 960000:93 1248000:98" > /sys/devices/system/cpu/cpu0/cpufreq/interactive/target_loads
echo 60000 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/min_sample_time
echo 0 > /sys/devices/system/cpu/cpu0/cpufreq/interactive/max_freq_hysteresis
echo 384000 > /sys/devices/system/cpu/cpu0/cpufreq/scaling_min_freq
# online CPU4
echo 1 > /sys/devices/system/cpu/cpu4/online
# configure governor settings for big cluster
echo "interactive" > /sys/devices/system/cpu/cpu4/cpufreq/scaling_governor
echo 1 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/use_sched_load
echo 1 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/use_migration_notif
echo "20000 960000:40000 1248000:30000" > /sys/devices/system/cpu/cpu4/cpufreq/interactive/above_hispeed_delay
echo 150 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/go_hispeed_load
echo 20000 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/timer_rate
echo 1248000 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/hispeed_freq
echo 1 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/io_is_busy
echo 98 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/target_loads
echo 60000 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/min_sample_time
echo 0 > /sys/devices/system/cpu/cpu4/cpufreq/interactive/max_freq_hysteresis
echo 384000 > /sys/devices/system/cpu/cpu4/cpufreq/scaling_min_freq

# Use CPUSet callibrations
echo "0-2,4-7" > /dev/cpuset/foreground/cpus 
echo "4-7" > /dev/cpuset/foreground/boost/cpus 
echo "0-7" > /dev/cpuset/top-app/cpus 

# Disable some wakelocks
echo 0 > /sys/module/wakeup/parameters/enable_wlan_rx_wake_ws 
echo 0 > /sys/module/wakeup/parameters/enable_wlan_ctrl_wake_ws 
echo 0 > /sys/module/wakeup/parameters/enable_wlan_wake_ws 
echo 0 > /sys/module/wakeup/parameters/enable_msm_hsic_ws 
echo 0 > /sys/module/wakeup/parameters/enable_qcom_rx_wakelock_ws 
echo 0 > /sys/module/wakeup/parameters/enable_netlink_ws 
echo 0 > /sys/module/wakeup/parameters/enable_ipa_ws 
echo 0 > /sys/module/wakeup/parameters/enable_timerfd_ws 

# Set I/O Scheduler tweaks
echo "maple" > /sys/block/mmcblk0/queue/scheduler 
echo 512 > /sys/block/mmcblk0/queue/read_ahead_kb 
echo 4 > /sys/block/mmcblk0/queue/iosched/writes_starved 
echo 16 > /sys/block/mmcblk0/queue/iosched/fifo_batch 
echo 350 > /sys/block/mmcblk0/queue/iosched/sync_read_expire 
echo 550 > /sys/block/mmcblk0/queue/iosched/sync_write_expire 
echo 250 > /sys/block/mmcblk0/queue/iosched/async_read_expire 
echo 450 > /sys/block/mmcblk0/queue/iosched/async_write_expire 
echo 10 > /sys/block/mmcblk0/queue/iosched/sleep_latency_multiple 

# Don't treat storage as rotational
echo 0 > /sys/block/mmcblk0/queue/rotational 

# Disable core control
echo 0 > /sys/module/msm_thermal/core_control/enabled 
        
# Congigure Simple Thermal driver
echo "1555200 1536000 40 38" > /sys/kernel/msm_thermal/zone0 
echo "1478400 1536000 41 40" > /sys/kernel/msm_thermal/zone1 
echo "1478400 1440000 42 41" > /sys/kernel/msm_thermal/zone2 
echo "1344000 1440000 43 42" > /sys/kernel/msm_thermal/zone3 
echo "1344000 1344000 44 43" > /sys/kernel/msm_thermal/zone4 
echo "1248000 1344000 46 44" > /sys/kernel/msm_thermal/zone5 
echo "960000 1248000 48 46" > /sys/kernel/msm_thermal/zone6 
echo "960000 960000 53 50" > /sys/kernel/msm_thermal/zone7 
echo "768000 768000 65 60" > /sys/kernel/msm_thermal/zone8 
echo "600000 768000 70 65" > /sys/kernel/msm_thermal/zone9 
echo "600000 600000 75 70" > /sys/kernel/msm_thermal/zone10 
echo "460000 600000 80 78" > /sys/kernel/msm_thermal/zone11 
echo "460000 460000 90 80" > /sys/kernel/msm_thermal/zone12 
echo 8000 > /sys/kernel/msm_thermal/sampling_ms 
echo 1 > /sys/kernel/msm_thermal/enabled 

# Disable msm_performance touchboost
echo 0 > /sys/module/msm_performance/parameters/touchboost 

# Set Scheduler Values
echo 6 > /proc/sys/kernel/sched_mostly_idle_nr_run
echo 98 > /proc/sys/kernel/sched_upmigrate
echo 85 > /proc/sys/kernel/sched_downmigrate
echo 8 > /proc/sys/kernel/sched_upmigrate_min_nice 
echo 960000 > /sys/devices/system/cpu/cpu0/sched_mostly_idle_freq 
echo 25 > /sys/devices/system/cpu/cpu0/sched_mostly_idle_load

# Enable core control with custom config
echo 95 > /sys/devices/system/cpu/cpu4/core_ctl/busy_up_thres 
echo 80 > /sys/devices/system/cpu/cpu4/core_ctl/busy_down_thres 
echo 800 > /sys/devices/system/cpu/cpu4/core_ctl/offline_delay_ms 
echo 10000 > /sys/devices/system/cpu/cpu4/core_ctl/online_delay_ms 
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/task_thres 
echo 1 > /sys/devices/system/cpu/cpu4/core_ctl/is_big_cluster 
echo 4 > /sys/devices/system/cpu/cpu4/core_ctl/max_cpus 
echo 2 > /sys/devices/system/cpu/cpu4/core_ctl/min_cpus 
echo 1 > /sys/devices/system/cpu/cpu0/core_ctl/not_preferred 
echo "1 1 1 1" > /sys/devices/system/cpu/cpu0/core_ctl/always_online_cpu 
echo "1 1 0 0" > /sys/devices/system/cpu/cpu4/core_ctl/always_online_cpu 
chown system:system /sys/devices/system/cpu/cpu4/core_ctl/min_cpus
chown system:system /sys/devices/system/cpu/cpu4/core_ctl/max_cpus

# Enable PDesireAudio
echo 1 > /sys/module/snd_soc_wcd9330/parameters/PDesireAudio

# Disable PDesireAudio Static Mode
echo 0 > /sys/module/snd_soc_wcd9330/parameters/pdesireaudio_static_mode

